<!DOCTYPE html>
<html>
<head>

  <style>
    #captchaBox {
      width: fit-content;
      cursor: pointer;
    }
    #errorMessage {
      color: red;
      display: none;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<div id="captchaBox">
  <img id="captchaImage" src="capctha_start.png" alt="CAPTCHA">
</div>

<form id="loginForm">
  <input type="text" id="username" placeholder="Username"><br><br>
  <input type="password" id="password" placeholder="Password"><br><br>
  <input type="submit" value="Login">
</form>

<p id="errorMessage">Invalid username or password</p>

<script>
  let captchaState = 0; // 0 = not ticked, 1 = ticked
  const captchaImg = document.getElementById("captchaImage");
  const captchaBox = document.getElementById("captchaBox");
  const errorMsg = document.getElementById("errorMessage");

  captchaBox.addEventListener("click", () => {
    if (captchaState === 0) {
      captchaImg.src = "capchta.gif";
      captchaState = 2; // animation playing

      setTimeout(() => {
        captchaImg.src = "capctha_final.png";
        captchaState = 1; // marked as ticked
      }, 5000); // wait 2s for gif to finish
    }
  });

  document.getElementById("loginForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();

    if (captchaState !== 1) {
      alert("Please verify CAPTCHA first.");
      return;
    }

    if (username === "20001436008" && password === "krSrh8ma") {
      window.location.href = "test2.html";
    } else {
      errorMsg.style.display = "block";
      captchaImg.src = "capctha_start.png";
      captchaState = 0;
    }
  });
</script>

</body>
</html>
